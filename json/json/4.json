{
    "article_id": "7133528305512218637",
    "audit_status": 2,
    "brief_content": "\u672c\u7bc7\u535a\u5ba2\u4f7f\u7528\u591a\u9636\u6bb5\u6784\u5efa\u7684\u65b9\u5f0f\u521b\u5efa\u7d27\u51d1\u7684 Docker \u955c\u50cf\uff0c\u63a2\u7a76\u5982\u4f55\u663e\u8457\u7f29\u5c0f Docker \u955c\u50cf\u7684\u5927\u5c0f\u3002",
    "category_id": "6809637769959178254",
    "collect_count": 0,
    "comment_count": 0,
    "content": "",
    "cover_image": "https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64fde3e688c14d29a71654bb95f6ae93~tplv-k3u1fbpfcp-watermark.image?",
    "ctime": "1660904086",
    "digg_count": 1,
    "display_count": 0,
    "draft_id": "7133508699548549157",
    "hot_index": 5,
    "is_english": 0,
    "is_gfw": 0,
    "is_hot": 0,
    "is_markdown": 1,
    "is_original": 1,
    "link_url": "",
    "mark_content": "\u591a\u9636\u6bb5\u6784\u5efa\u65b9\u5f0f\uff0c\u662f\u5728 `Dockerfile` \u4e2d\u4f7f\u7528\u591a\u4e2a `FROM` \u6307\u4ee4\uff0c\u6bcf\u4e2a `FORM` \u6307\u4ee4\u90fd\u662f\u4e00\u4e2a\u65b0\u7684\u6784\u5efa\u9636\u6bb5\uff0c\u5e76\u4e14\u53ef\u4ee5\u65b9\u4fbf\u5730\u590d\u5236\u4e4b\u524d\u9636\u6bb5\u7684\u6784\u4ef6\u3002\u8ba9\u6211\u4eec\u6765\u770b\u4e00\u4e2a\u7b80\u5355\u7684 `Go` \u7a0b\u5e8f\u3002\u4ee3\u7801\u5982\u4e0b\u3002\u70b9\u51fb[\u6b64\u5904](https://go.dev/play/p/I8Fk3DHcPcP)\u60a8\u53ef\u4ee5\u83b7\u53d6\u4ee3\u7801\u3002\n\n\n![image.png](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fec055b0ee544f1198ae23036fb74ec2~tplv-k3u1fbpfcp-watermark.image?)\n\u8ba9\u6211\u4eec\u6765\u4e3a\u5b83\u6784\u5efa `Docker` \u955c\u50cf\uff0c`Dockerfile` \u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u3002\n\n```Dockerfile\nFROM golang:1.19-alpine\nWORKDIR /build\nCOPY go.mod .\nRUN go mod download\nCOPY . .\nRUN go build -o /main main.go\nENTRYPOINT [\"/main\"]\n```\n\n\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u4e2a 359 MB\u5927\u5c0f\u7684\u955c\u50cf\u3002\n![image.png](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bba86afc8eb5404ca7ca15b0e5bda2ea~tplv-k3u1fbpfcp-watermark.image?)\n\n\u73b0\u5728\u8ba9\u6211\u4eec\u6784\u5efa\u76f8\u540c\u7684\u7a0b\u5e8f\uff0c\u4f46\u4f7f\u7528**\u591a\u9636\u6bb5\u6784\u5efa**\uff1a\n```Dockerfile\nFROM golang:1.19-alpine as builder\nWORKDIR /build\nCOPY go.mod .\nRUN go mod download\nCOPY . .\nRUN go build -o /main main.go\n\nFROM alpine:3\nCOPY --from=builder main /bin/main\nENTRYPOINT [\"/bin/main\"]\n```\n\n\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u5c45\u7136\u5f97\u5230\u4e86\u4e00\u4e2a\u53ea\u6709 12 MB \u5927\u5c0f\u7684 `Docker` \u955c\u50cf\u3002\u8fd8\u4e0d\u9519\uff0c\u6211\u4eec\u628a\u955c\u50cf\u5927\u5c0f\u51cf\u5c11\u4e86\u7ea6 30 \u500d\u3002\u6211\u4eec\u662f\u5982\u4f55\u5b8c\u6210\u7684\u5462\uff1f\n\n![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0bc87e9888946cea329fb64671189a9~tplv-k3u1fbpfcp-watermark.image?)\n\n\u5728\u7b2c\u4e00\u79cd\u60c5\u51b5\uff0c\u4f7f\u7528\u5355\u9636\u6bb5\u6784\u5efa\uff0c`Docker` \u955c\u50cf\u4e2d\u5305\u542b\u4e86\u4ee5\u4e0b\u5185\u5bb9\u3002\n- golang:1.19-alpine -- 345.93 MB\n- source size -- 11.1 KB\n- \u7f16\u8bd1\u540e\u7684\u5e94\u7528\u7a0b\u5e8f\u5927\u5c0f -- 6.5 MB\n\n\u5728\u7b2c\u4e8c\u79cd\u60c5\u51b5\uff0c\u6211\u4eec\u5148\u7f16\u8bd1\u5e76\u6784\u5efa\u4e86\u5e94\u7528\u7a0b\u5e8f\uff0c\u7136\u540e\u5c06\u5df2\u7ecf\u7f16\u8bd1\u7684\u7ed3\u679c\u590d\u5236\u5230\u6700\u540e\u4e00\u4e2a\u9636\u6bb5\u3002\n- alpine size:3 -- 5.54 MB\n- \u7f16\u8bd1\u540e\u7684\u5e94\u7528\u7a0b\u5e8f\u5927\u5c0f -- 6.5 MB\n\n**\u662f\u5426\u53ef\u4ee5\u518d\u51cf\u5c0f Docker \u955c\u50cf\u7684\u5927\u5c0f\uff1f**\n\n\u7b54\u6848\u662f\uff1a\u80fd\u3002\u4f46\u4e3a\u6b64\u6211\u4eec\u9700\u8981\u4f7f\u7528 [`Docker Scratch`](https://hub.docker.com/_/scratch) -- \u5b83\u662f\u4e00\u4e2a 0 MB \u7684 `Docker` \u955c\u50cf\u3002\n```Dockerfile\nFROM golang:1.19-alpine as builder\n\nWORKDIR /build\nCOPY go.mod .\nRUN go mod download\nCOPY . .\nRUN CGO_ENABLED=0 GOOS=linux go build -o /main main.go\n\nFROM scratch\nCOPY --from=builder /etc/ssl/certs/ca-certificates.crt /etc/ssl/certs/\nCOPY --from=builder main /bin/main\nENTRYPOINT [\"/bin/main\"]\n```\n\n\u5b8c\u6210\u540e\uff0c\u6211\u4eec\u7684\u955c\u50cf\u5927\u5c0f\u4e3a 6.66 MB\u3002\n\n![image.png](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/26cddcf7cf5549adb8cb6ceddc0122f6~tplv-k3u1fbpfcp-watermark.image?)",
    "mtime": "1660966681",
    "original_author": "",
    "original_type": 0,
    "rank_index": 6.25413758,
    "rtime": "1660966681",
    "status": 2,
    "tag_ids": [
      6809640364677267456,
      6809640396788858880
    ],
    "title": "\u591a\u9636\u6bb5\u6784\u5efa\u4f18\u5316\u60a8\u7684 Go \u7a0b\u5e8f\u955c\u50cf",
    "user_id": "571401779807175",
    "user_index": 7.803550848397884,
    "verify_status": 1,
    "view_count": 103,
    "visible_level": 0
  }