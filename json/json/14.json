{
    "article_id": "7133779387081555999",
    "audit_status": 2,
    "brief_content": "\u643a\u624b\u521b\u4f5c\uff0c\u5171\u540c\u6210\u957f\uff01\u8fd9\u662f\u6211\u53c2\u4e0e\u300c\u6398\u91d1\u65e5\u65b0\u8ba1\u5212 \u00b7 8 \u6708\u66f4\u6587\u6311\u6218\u300d\u7684\u7b2c22\u5929\uff0c\u70b9\u51fb\u67e5\u770b\u6d3b\u52a8\u8be6\u60c5 MongoDB\u5b89\u88c5 1\u3001\u4e0b\u8f7d\u5b89\u88c5\uff08http://www.mongodb.org/downloads\uff09\uff0c\u5b89",
    "category_id": "6809637767543259144",
    "collect_count": 0,
    "comment_count": 0,
    "content": "",
    "cover_image": "",
    "ctime": "1660962526",
    "digg_count": 1,
    "display_count": 0,
    "draft_id": "7131194312091500552",
    "hot_index": 10,
    "is_english": 0,
    "is_gfw": 0,
    "is_hot": 0,
    "is_markdown": 1,
    "is_original": 1,
    "link_url": "",
    "mark_content": "\u643a\u624b\u521b\u4f5c\uff0c\u5171\u540c\u6210\u957f\uff01\u8fd9\u662f\u6211\u53c2\u4e0e\u300c\u6398\u91d1\u65e5\u65b0\u8ba1\u5212 \u00b7 8 \u6708\u66f4\u6587\u6311\u6218\u300d\u7684\u7b2c22\u5929\uff0c[\u70b9\u51fb\u67e5\u770b\u6d3b\u52a8\u8be6\u60c5](https://juejin.cn/post/7123120819437322247 \"https://juejin.cn/post/7123120819437322247\")\n\n> \u5728\u5b66\u4e60\u4e00\u95e8\u6280\u80fd\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8bb0\u8bb0\u7b14\u8bb0\uff0c\u65e5\u8ba1\u6708\u7d2f\uff0c\u53d1\u73b0\u6709\u4e00\u4e9b\u6548\u679c\uff01\n\n\n## MongoDB\u5b89\u88c5\n\n- 1\u3001\u4e0b\u8f7d\u5b89\u88c5\uff08[http://www.mongodb.org/downloads](http://www.mongodb.org/downloads)\uff09\uff0c\u5b89\u88c5\u76ee\u5f55\uff1a`c:\\MongoDB`\n\n- 2\u3001\u5728 `c:\\MongoDB`\u4e0b\u65b0\u5efa `data\\db` \u76ee\u5f55\n\n- 3\u3001\u547d\u4ee4\u884c\u8fd0\u884c\u670d\u52a1\u7aef\u7a0b\u5e8f `mongod.exe\uff1a`\n```\nC:\\>cd C:\\MongoDB\\bin\nC:\\MongoDB\\bin>mongod.exe --dbpath=C:\\MongoDB\\data\\db --directoryperdb  --logpath=C:\\MongoDB\\data\\logs --logappend\n```\n\n- 4\u3001\u65b0\u5efa\u547d\u4ee4\u884c\uff0c\u8fd0\u884c\u5ba2\u6237\u7aef\u7a0b\u5e8f `mongo.exe` (\u4e0d\u8981\u5173\u95ed `mongod.exe` \u8fd9\u4e2a\u547d\u4ee4\u884c\u7a97\u53e3)\n\n## MongoDB\u6982\u5ff5\n\n- databases: \u6570\u636e\u5e93;\n\n- collections:\u8868\uff1b\uff08colloections \u7ec4\u6210\u4e86 databases\uff09\n\n- documents:\u884c\uff1b\uff08documents \u7ec4\u6210\u4e86 collections\uff09\n\n> MongoDB \u6ca1\u6709\u65b0\u5efa\u6570\u636e\u5e93\u7684\u547d\u4ee4\uff0c\u53ea\u8981\u8fdb\u884c `insert` \u6216\u5176\u5b83\u64cd\u4f5c\uff0cMongoDB \u5c31\u4f1a\u81ea\u52a8\u5e2e\u4f60\u5efa\u7acb\u6570\u636e\u5e93\u548c `collection`\u3002\u5f53\u67e5\u8be2\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684 `collection` \u65f6\u4e5f\u4e0d\u4f1a\u51fa\u9519\uff0cMongo \u4f1a\u8ba4\u4e3a\u90a3\u662f\u4e00\u4e2a\u7a7a\u7684 `collection`\u3002\n\n> \u4e00\u4e2a\u5bf9\u8c61\u88ab\u63d2\u5165\u5230\u6570\u636e\u5e93\u4e2d\u65f6\uff0c\u5982\u679c\u5b83\u6ca1\u6709 ID\uff0c\u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2a\u201c`_id`\u201d\u5b57\u6bb5\uff0c\u4e3a `12` \u5b57\u8282(24\u4f4d)`16` \u8fdb\u5236\u6570\u3002\n\u5f53\u7136\u5982\u679c\u63d2\u5165\u6587\u6863\u4e0d\u5e26_id,\u5219\u7cfb\u7edf\u4f1a\u5e2e\u4f60\u81ea\u52a8\u521b\u5efa\u4e00\u4e2a\uff0c\u5982\u679c\u81ea\u5df1\u6307\u5b9a\u4e86\u5c31\u7528\u81ea\u5df1\u6307\u5b9a\u7684\u3002\n\n### \u547d\u540d\n\n\u5b57\u6bb5\u540d\u9650\u5236\uff1a\u4e0d\u80fd\u4ee5\u201c$\u201d\u5f00\u5934\uff1b\u4e0d\u80fd\u5305\u542b`\u201c.\u201d`\uff1b`\u201c_id\u201d`\u662f\u7cfb\u7edf\u4fdd\u7559\u7684\u5b57\u6bb5\uff0c\u4f46\u7528\u6237\u53ef\u4ee5\u81ea\u5df1\u50a8\u5b58\u552f\u4e00\u6027\u7684\u6570\u636e\u5728\u5b57\u6bb5\u4e2d\u3002\n\n### \u5ba2\u6237\u7aef\u8bed\u6cd5\uff1a\n\n- `show dbs`  // \u5217\u51fa\u6240\u6709\u6570\u636e\u5e93\n\n- `use memo`  // \u4f7f\u7528\u6570\u636e\u5e93 memo\u3002\u5373\u4f7f\u8fd9\u4e2a\u6570\u636e\u5e93\u4e0d\u5b58\u5728\u4e5f\u53ef\u4ee5\u6267\u884c\uff0c\u4f46\u8be5\u6570\u636e\u5e93\u4e0d\u4f1a\u7acb\u523b\u88ab\u65b0\u5efa\uff0c\u8981\u7b49\u5230\u6267\u884c\u4e86insert\u7b49\u7684\u64cd\u4f5c\u65f6\uff0c\u624d\u4f1a\u5efa\u7acb\u8fd9\u4e2a\u6570\u636e\u5e93\u3002\n\n- `show collections`  // \u5217\u51fa\u5f53\u524d\u6570\u636e\u5e93\u7684collections(\u5f53\u524d\u6570\u636e\u5e93\u4e0b\u7684\u8868)\n\n- `db`  // \u663e\u793a\u5f53\u524d\u6570\u636e\u5e93\n\n- `show users`  // \u5217\u51fa\u7528\u6237\n\n- `db.\u8868\u540d.insert({name:\"jack\",addr:\"fujian\"})`;//\u5411\u8868\u63d2\u5165\u5b57\u6bb5\n\n- `db.\u8868\u540d.find();` //\u67e5\u8be2-\u4f5c\u7528\u76f8\u5f53\u4e8e `select * from` \u8868\u540d\n\n\n#### \u67e5\u8be2\u6570\u636e\n\n- `$lt`    ->less then  \u5c0f\u4e8e\n\n- `$lte`  ->less than and equal   \u4e0d\u5927\u4e8e \n\n-`$lt `   ->less then  \u5c0f\u4e8e\n\n- `$gt`   ->greater then      \u5927\u4e8e\n\n- `$gte` ->greater then and equal  \u4e0d\u5c0f\u4e8e\uff09\n\n- `$ne`  ->not equal     \u4e0d\u7b49\u4e8e\n\n```\ndb.foo.find() // select * from foo\ndb.foo.find().limit(10)  // select * from foo limit 10\ndb.foo.find().sort({x:1})  // select * from foo order by x asc  1:\u5347\u5e8f  -1:\u964d\u5e8f \ndb.foo.find().sort({x:1}).skip(5).limit(10)  // select * from foo order by x asc limit 5, 10\ndb.foo.find({x:10})  // select * from foo where x = 10\ndb.foo.find({x: {$lt:10}})  // select * from foo where x <= 10\ndb.foo.find({}, {y:true})  // select y from foo\n// \u4e00\u4e9bSQL\u4e0d\u80fd\u505a\u7684\uff0cMongoDB\u4e5f\u53ef\u4ee5\u505a\uff1a\ndb.foo.find({\"address.city\":\"gz\"})  // \u641c\u7d22\u5d4c\u5957\u6587\u6863address\u4e2dcity\u503c\u4e3agz\u7684\u8bb0\u5f55\ndb.foo.find({likes:\"math\"})  // \u641c\u7d22\u6570\u7ec4\ndb.foo.ensureIndex({\"address.city\":1})  // \u5728\u5d4c\u5957\u6587\u6863\u7684\u5b57\u6bb5\u4e0a\u5efa\u7d22\u5f15\n  ```\n\n#### \u66f4\u65b0\u6570\u636e\n\n-  `db.foo.update({},{})`  //\u66f4\u65b0\u5bf9\u8c61\uff0c\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u67e5\u8be2\u5bf9\u8c61\uff0c\u7b2c\u4e8c\u4e2a\u662f\u66ff\u4ee3\u7684,\u53ef\u4ee5\u5728\u7b2c\u4e8c\u4e2a\u5bf9\u8c61\u91cc\u6307\u5b9a\u66f4\u65b0\u54ea\u4e9b\u5b57\u6bb5\uff0c\u8981\u4f7f\u7528$set\u3002\"$set\"\u7528\u6765\u6307\u5b9a\u4e00\u4e2a\u952e\u7684\u503c\u3002\u5982\u679c\u8fd9\u4e2a\u952e\u4e0d\u5b58\u5728\uff0c\u5219\u521b\u5efa\u5b83\uff0c\u5982\u679c\u5b58\u5728\u5219\u66f4\u65b0\n\n ` db.foo.update({name:\"jack\"},{$set:{name:\"zky\"}});`\n\n #### \u5220\u9664\u8bb0\u5f55\n\n- `db.foo.remove({});/` /\u7b2c\u4e00\u4e2a\u53c2\u6570\u8981\u5220\u9664\u7684\u8bb0\u5f55,\u53ea\u5220\u9664\u5339\u914d\u7684\u5bf9\u8c61\n\n#### \u5220\u9664\u6570\u636e\u5e93\u8868\n\n-  `db.foo.drop();` //\u5220\u9664foo\u8fd9\u4e2a\u8868\n\n#### \u5220\u9664\u5f53\u524d\u6570\u636e\u5e93\n\n-  `db.dropDatebase();`\n\n\n#### \u5b57\u6bb5\u64cd\u4f5c\n\n- `$push`\uff1a\u589e\u52a0\u6570\u7ec4\u5143\u7d20\uff1b\n\n`db.foo.update({name:'xxx'},{$push:{age:\"10\"}});`\n\n- `$pop`\uff1a\u51cf\u5c11\u6570\u7ec4\u5143\u7d20\uff1b\n\n- `$or\uff0c$and\u548c$exists`\n\n`db.people.find({\"name\":\"yhb\",$or:[{\"age\":18},{\"age\":20}]})`   //\u627e\u51faname\u4e3ayhb,age\u4e3a18\u6216\u800520\u7684;\n\n`db.people.find({\"addr\":{$exists:false}})`     //\u627e\u51fa\u4e0d\u5b58\u5728addr field\n\n`db.people.find({$or:[{\"name\":\"yhb\",\"age\":18},{\"name\":\"lwy\",\"age\":19}]}) `\n// \u627e\u51fa people \u4e2d name \u4e3a yhb\uff0c\u5e74\u9f84\u4e3a 18\uff0c\u6216\u8005 name \u4e3a lwy\uff0cname \u4e3a 19 \u7684\n\n#### \u5c0f\u7ed3\n> \u5982\u679c\u662f`or\uff1a ->> {$or:[{\u6761\u4ef61},{\u6761\u4ef62}]}`\n\u5982\u679c\u662f `and\uff1a ->> {$and:[{\u6761\u4ef61},{\u6761\u4ef62}]}`\n\n#### \u7d22\u5f15\n\n```\ndb.foo.ensureIndex({productid:1})  // \u5728productid\u4e0a\u5efa\u7acb\u666e\u901a\u7d22\u5f15\n\ndb.foo.ensureIndex({district:1, plate:1})  // \u591a\u5b57\u6bb5\u7d22\u5f15\n\ndb.foo.ensureIndex({productid:1}, {unique:true}) // \u552f\u4e00\u7d22\u5f15\n```\n\n## \u5907\u4efd\u4e0e\u6062\u590d\n\n### (1)\u3001\u5907\u4efd\u5de5\u5177 mongodump;\n\n\u547d\u4ee4\u884c\u6267\u884c\uff1a\n```\nc:\\MongoDB\\bin\\mongodump.exe --help \u67e5\u770b\u5e2e\u52a9\u547d\u4ee4\n```\n\u793a\u4f8b-\u5907\u4efd\u6570\u636e\u5e93\uff1a\n\n\u547d\u4ee4\u884c\u6267\u884c\uff1a\n```\nc:\\MongoDB\\bin\\mongodump -o ../data/backup/test \uff08\u5907\u4efd\u6570\u636e\u5230backuo/test\u76ee\u5f55\u4e0b\uff09\n```\n### (2)\u3001\u6062\u590d\u6570\u636e mongorestore:\n\n\u793a\u4f8b-\u6062\u590d\u6570\u636e\u5e93\uff1a\n\n\u547d\u4ee4\u884c\u6267\u884c\uff1a\n```\nc:\\MongoDB\\bin\\mongorestore -d test -c t002 c:\\MongoDB\\data\\backup\\test\\t002.bson\n```\n\n## \u6570\u636e \u5bfc\u5165& \u5bfc\u51fa\n\n\u6bcf\u6b21\u53ea\u5bfc\u5165\\\u5bfc\u51fa\u4e00\u4e2a\u8868\uff0cjson\u6216csv\u683c\u5f0f\uff1b\n\n### (1)\u3001\u5bfc\u5165  mongoimport\n\n\u793a\u4f8b\uff1a\n```\nmongoimport -d test -c t004 drop c:\\MongoDB\\data\\backup\\test_t001.json\n```\n### (2)\u3001\u5bfc\u51fa mongoexport\n\n\u793a\u4f8b\uff1a\n```\nmongoexport -d test -c t001 -o c:\\MongoDB\\data\\backup\\test_t001.json\n```\n\n## \u5b89\u5168\u4e0e\u8ba4\u8bc1\n\n> MongoDB\u672c\u8eab\u662f\u6ca1\u6709\u5f00\u542f\u5b89\u5168\u6027\u68c0\u67e5\u7684\uff0c\u5728\u5f00\u542f\u4e4b\u524d\uff0c\u9700\u8981\u81f3\u5c11\u4e00\u4e2a\u7ba1\u7406\u5458\u8d26\u53f7\u3002\n\n\u5f00\u542f\u5b89\u5168\u6027\u68c0\u67e5\uff0c\u53ea\u6709\u6570\u636e\u5e93\u8ba4\u8bc1\u7528\u6237\u624d\u80fd\u6267\u884c\u8bfb\u6216\u5199\u7684\u64cd\u4f5c\u3002\n\n#### \u589e\u52a0\u7528\u6237\n\n\u6ce8\uff1aV3\u7248\u672cmongoDB\u5df2\u7ecf\u4e0d\u518d\u4f7f\u7528addUser\uff0c\u800c\u662f\u91c7\u7528\u4e86db.createUser\uff1b\n\n\u793a\u4f8b\uff1a\n\n```c\nuse admin\n\ndb.createUser(\n   {\n     user: \"accountUser\",\n     pwd: \"password\",\n     roles: [ \"readWrite\", \"dbAdmin\" ]\n   }\n)\n\n```\n\n#### \u5bf9\u7528\u6237\u5f00\u542f\u5b89\u5168\u8ba4\u8bc1\n\n\n\n1\u3001\u91cd\u542f\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\uff1b\n\n2\u3001\u7136\u540e\u5207\u6362\u5230\u5ba2\u6237\u7aef\u547d\u4ee4\u884c\uff1a\n\n```c\nuse admin\n\ndb.auth(\"root\",\"root\")\n\n\u8fd9\u6837\uff0c\u67d0\u79cd\u6743\u9650\u7684\u7528\u6237\u53ea\u6709\u5207\u6362\u5230\u5bf9\u5e94\u7684\u6570\u636e\u5e93\u624d\u80fd\u6267\u884c\u67d0\u4e9b\u64cd\u4f5c\u3002\n\n```\n\n## \u53c2\u8003\n\nhttp://www.open-open.com/lib/view/open1335003001358.html\n\nhttp://www.runoob.com/mongodb/mongodb-tutorial.html\n\n### MongoDB\u53ef\u89c6\u5316\u5ba2\u6237\u7aef\u5de5\u5177\n\n- **[robomongo](https://robomongo.org/)**  ",
    "mtime": "1660962669",
    "original_author": "",
    "original_type": 0,
    "rank_index": 4.44726819,
    "rtime": "1660962669",
    "status": 2,
    "tag_ids": [
      6809640407484334080,
      6809640372352843776,
      6809640600502009856
    ],
    "title": "\u6211\u7684 MongoDB \u5b66\u4e60\u7b14\u8bb0\uff1a\u57fa\u672c\u64cd\u4f5c\u548c\u5e38\u7528\u547d\u4ee4",
    "user_id": "1679709497208941",
    "user_index": 7.3514483977972,
    "verify_status": 1,
    "view_count": 193,
    "visible_level": 0
  }